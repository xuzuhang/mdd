(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/components/cpimg/cpimg"],{"18e5":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=[],n="",a=0,r={name:"cpimg",props:{maxWidth:{type:Number,default:1e3},type:{type:String,default:"url"},ql:{type:Number,default:.92},src:{type:String,default:""},number:{type:Number,default:1},fixOrientation:{type:Boolean,default:!0},size:{type:Number,default:5e5}},data:function(){return{cWidth:750,cHeight:750}},onUnload:function(){},methods:{_changImg:function(){var e=this;""==e.src?t.chooseImage({count:e.number,sizeType:["original"],success:function(t){i=[],n=t.tempFilePaths,a=0,e._cpImg()},fail:function(t){e._err(t)}}):_cpImg(e.src)},_cpImg:function(){var e=this,i=n[a];function r(n,a){var r,o,s=n.width,h=n.height,u=1,c=1;(a/1024>=e.size||n.width>=e.maxWidth)&&(n.width>=n.height&&n.width>=e.maxWidth?(n.height=e.maxWidth*n.height/n.width,n.width=e.maxWidth):n.width<n.height&&n.height>=e.maxWidth&&(n.width=e.maxWidth*n.width/n.height,n.height=e.maxWidth),u=n.width/s,c=n.height/h),r=s*u,o=h*c;var d=t.createCanvasContext("_myCanvas",e);if(e.cWidth=n.width,e.cHeight=n.height,e.fixOrientation){var f=n.orientation;[5,6,7,8,"right","left","right-mirrored","left-mirrored"].indexOf(f)>-1&&(e.cWidth=n.height,e.cHeight=n.width),2==f||"up-mirrored"==f?(d.translate(r,0),d.scale(-1,1)):3==f||"down"==f?(d.translate(r,o),d.rotate(Math.PI)):4==f||"down-mirrored"==f?(d.translate(0,o),d.scale(1,-1)):5==f||"right-mirrored"==f?(d.rotate(.5*Math.PI),d.scale(1,-1)):6==f||"right"==f?(d.rotate(.5*Math.PI),d.translate(0,-o)):7==f||"left-mirrored"==f?(d.rotate(.5*Math.PI),d.translate(r,-o),d.scale(-1,1)):8==f||"left"==f?(d.rotate(-.5*Math.PI),d.translate(-r,0)):d.translate(0,0)}var l=0;l=10,setTimeout(function(){d.drawImage(i,0,0,r,o),d.draw(!1,function(){var i=0;i=10,setTimeout(function(){t.canvasToTempFilePath({width:Number(e.cWidth),height:Number(e.cHeight),destWidth:Number(e.cWidth),destHeight:Number(e.cHeight),canvasId:"_myCanvas",fileType:"jpg",quality:Number(e.ql),success:function(t){if("base64"==e.type){plus.io.resolveLocalFileSystemURL(t.tempFilePath,function(t){t.file(function(t){var i=new plus.io.FileReader;i.readAsDataURL(t),i.onloadend=function(t){2==t.target.readyState?e._result(t.target.result):e._err(t)}})},function(t){e._err(t)})}else e._result(t.tempFilePath)},fail:function(t){e._err(t)}},e)},i)})},l)}t.hideLoading(),t.showLoading({title:"图片压缩中 ".concat(a+1,"/").concat(n.length),mask:!0}),t.getImageInfo({src:i,success:function(n){t.getFileInfo({filePath:i,success:function(t){r(n,t.size)},fail:function(t){e._err(t)}})},fail:function(t){e._err(t)}})},_reverseImgData:function(t){for(var e=t.width,i=t.height,n=0,a=0;a<i/2;a++)for(var r=0;r<4*e;r++)n=t.data[a*e*4+r],t.data[a*e*4+r]=t.data[(i-a-1)*e*4+r],t.data[(i-a-1)*e*4+r]=n;return t},_getH5ImageInfo:function(t,e){var i=new Image;i.src=t,i.onload=function(i){var n=this,a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onload=function(t){var i=this;if(200==i.status||0===i.status){var a=new FileReader;a.onload=function(t){var a=new DataView(this.result);if(65496!=a.getUint16(0,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var r=a.byteLength,o=2;while(o<r){var s=a.getUint16(o,!1);if(o+=2,65505==s){if(1165519206!=a.getUint32(o+=2,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var h=18761==a.getUint16(o+=6,!1);o+=a.getUint32(o+4,h);var u=a.getUint16(o,h);o+=2;for(var c=0;c<u;c++)if(274==a.getUint16(o+12*c,h))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:a.getUint16(o+12*c+8,h)})}else{if(65280!=(65280&s))break;o+=a.getUint16(o,!1)}}return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1})},a.readAsArrayBuffer(i.response)}},a.send()}},_result:function(e,r){i.push(e),a+=1,n.length-1>=a?this._cpImg():(t.hideLoading(),this.$emit("result",i))},_err:function(e){t.hideLoading(),this.$emit("err",e)}}};e.default=r}).call(this,i("6e42")["default"])},"4cad":function(t,e,i){"use strict";i.r(e);var n=i("18e5"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},"6b9a":function(t,e,i){"use strict";i.r(e);var n=i("9f73"),a=i("4cad");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("a88f");var o=i("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"9f73":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},a88f:function(t,e,i){"use strict";var n=i("c6c2"),a=i.n(n);a.a},c6c2:function(t,e,i){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/components/cpimg/cpimg-create-component',
    {
        'pages/components/cpimg/cpimg-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("6b9a"))
        })
    },
    [['pages/components/cpimg/cpimg-create-component']]
]);                
