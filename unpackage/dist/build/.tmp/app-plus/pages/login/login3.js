(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login3"],{"1ef9":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];s.d(e,"a",function(){return n}),s.d(e,"b",function(){return o})},"2d75":function(t,e,s){},"91b5":function(t,e,s){"use strict";var n=s("2d75"),o=s.n(n);o.a},"946c":function(t,e,s){"use strict";s.r(e);var n=s("cca0"),o=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},ae25:function(t,e,s){"use strict";s.r(e);var n=s("1ef9"),o=s("946c");for(var a in o)"default"!==a&&function(t){s.d(e,t,function(){return o[t]})}(a);s("91b5");var i=s("2877"),u=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=u.exports},c528:function(t,e,s){"use strict";(function(t){s("30b7"),s("921b");n(s("66fd"));var e=n(s("ae25"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("6e42")["createPage"])},cca0:function(t,e,s){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(s("ef4f"));function a(t){return t&&t.__esModule?t:{default:t}}var i=function(){return Promise.all([s.e("common/vendor"),s.e("pages/components/pickcity")]).then(s.bind(null,"f703"))},u=function(){return s.e("pages/components/cpimg/cpimg").then(s.bind(null,"6b9a"))},r={components:{myCityPicker:i,cpimg:u},onShow:function(){var t=getCurrentPages(),e=t[t.length-1];e.data.objloc&&(this.msgs.address=e.data.objloc.address,e.setData({objloc:""}))},onLoad:function(e){var s=this;this.tokens=e.tokens,t.request({url:this.websiteUrl+"/my",header:{authorization:this.tokens},success:function(t){s.user=t.data.data.user}}),t.getLocation({type:"gcj02",success:function(e){s.msgs.longitude=e.longitude,s.msgs.latitude=e.latitude;var o=new plus.maps.Point(e.longitude,e.latitude);plus.maps.Map.reverseGeocode(o,{},function(e){s.address=e.address,t.request({url:s.websiteUrl+"/areas/find?location="+encodeURIComponent(e.address),success:function(e){console.log(n(e," at pages/login/login3.vue:158")),t.request({url:s.websiteUrl+"/users",data:{areaId:e.data.data,mainBusiness:"",position:"",wechatNumber:"",address:"",profile:"",longitude:"",latitude:""},method:"PUT",header:{authorization:s.tokens},success:function(e){0==e.data.code&&(t.showToast({icon:"success",title:"注册成功"}),t.setStorage({key:"userInfo",data:JSON.stringify(e.data.data)}),setTimeout(function(){s.$store.state.token=s.tokens,t.setStorage({key:"token",data:s.tokens}),t.reLaunch({url:"../tabs/tabs"})},1e3))}})},fail:function(){},complete:function(){}})},function(t){})}})},data:function(){return{cityPickerValueDefault:[0,0,0],themeColor:"#007AFF",count:4,dis:!1,imgArray:[],token:"",address:"",user:{},msgs:{areaId:"6550688903064453120",mainBusiness:"",position:"",wechatNumber:"",address:"",profile:"",longitude:"",latitude:"",photos:[]}}},methods:{areapicshow:function(){this.$refs.myCityPicker.show()},onareasure:function(t){this.msgs.areaId=t.cityCode;var e=(0,o.default)(t.cityCode);this.address=e},sures:function(){var e=this;if(this.msgs.areaId){for(var s=[],o=0;o<this.imgArray.length;o++)s.push(this.imgArray[o].key);this.msgs.photos=s,console.log(n(this.msgs," at pages/login/login3.vue:268")),t.request({url:this.websiteUrl+"/my/shops",data:this.msgs,method:"PUT",header:{authorization:this.tokens},success:function(s){console.log(n(s," at pages/login/login3.vue:278")),0==s.data.code?(t.showToast({icon:"success",title:"注册成功"}),t.setStorage({key:"userInfo",data:JSON.stringify(s.data.data)}),setTimeout(function(){e.$store.state.token=e.tokens,t.setStorage({key:"token",data:e.tokens}),t.reLaunch({url:"../tabs/tabs"})},1e3)):t.showToast({title:s.data.message,icon:"none"})}})}else t.showToast({icon:"none",title:"所在地为必填选项"})},chooseLocation:function(){this.$jurisdiction(function(){t.getLocation({type:"gcj02",success:function(e){t.navigateTo({url:"../components/map?lat="+e.latitude+"&lng="+e.longitude})}})})}}};e.default=r}).call(this,s("6e42")["default"],s("0de9")["default"])}},[["c528","common/runtime","common/vendor"]]]);