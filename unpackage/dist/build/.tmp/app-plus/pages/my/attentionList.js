(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/attentionList"],{"143e":function(t,n,o){},"17df":function(t,n,o){"use strict";(function(t,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=function(){return o.e("pages/components/you-scroll").then(o.bind(null,"25b1"))},i={components:{youScroll:e},mounted:function(){var t=this;this.getMyloctions(function(){t.getNearShop("")})},data:function(){return{location:{latitude:"",longitude:""},nearShop:{arrs:[],Total:0,start:0,length:10,loadingText:"已全部加载完毕",times:0,loading:!1}}},methods:{toshops:function(n){t.navigateTo({url:"../shops/shop?id="+n})},getMyloctions:function(n){var o=this;t.getLocation({type:"gcj02",success:function(t){o.location={longitude:t.longitude,latitude:t.latitude},n&&n()},fail:function(){n&&n()}})},onNearShopDown:function(t){var n=this;this.nearShop={arrs:[],Total:0,start:0,length:10,loadingText:"已全部加载完毕",times:0,loading:!1},this.getMyloctions(function(){n.getNearShop(function(){t()})})},getNearShop:function(t){var n=this;if(this.nearShop.loading)t&&t();else{if(this.nearShop.loading=!0,0!==this.nearShop.Total&&this.nearShop.Total==this.nearShop.arrs.length)return this.nearShop.loadingText="已全部加载完毕",void(t&&t());this.nearShop.loadingText="上拉加载更多",console.log(a(this.websiteUrl+"/shops?start="+this.nearShop.start+"&length="+this.nearShop.length+"&sort=distance&lat="+this.location.latitude+"&lon="+this.location.longitude+"&followed=true"," at pages/my/attentionList.vue:141")),this.$myhttp.get(this.websiteUrl+"/shops?start="+this.nearShop.start+"&length="+this.nearShop.length+"&sort=distance&lat="+this.location.latitude+"&lon="+this.location.longitude+"&followed=true","",function(o){console.log(a(o," at pages/my/attentionList.vue:143"));o=o.data.data;if(n.nearShop.Total=o.totalCount,o.items.length){var e=o.items;if(e.forEach(function(t){t.location?t.loc=n.getDynamiclocation(t.location.lat,t.location.lon):t.loc=""}),n.nearShop.start+=o.items.length,n.nearShop.arrs=n.nearShop.arrs.concat(e),0!==n.nearShop.Total&&n.nearShop.Total==n.nearShop.arrs.length)return n.nearShop.loadingText="已全部加载完毕",void(t&&t())}else n.nearShop.loadingText="已全部加载完毕";n.nearShop.times++,n.nearShop.loading=!1,t&&t()},this)}},getDynamiclocation:function(t,n){if(!this.location.latitude)return"";var o,a,e=t*Math.PI/180,i=n;a=this.location.longitude,o=this.location.latitude*Math.PI/180;var l=e-o,r=i*Math.PI/180-a*Math.PI/180,s=2*Math.asin(Math.sqrt(Math.pow(Math.sin(l/2),2)+Math.cos(e)*Math.cos(o)*Math.pow(Math.sin(r/2),2)));return s*=6378.137,s=parseInt(Math.round(1e4*s)/10),(s/1e3).toFixed(2)+"km"}}};n.default=i}).call(this,o("6e42")["default"],o("0de9")["default"])},"1d04":function(t,n,o){"use strict";var a=o("143e"),e=o.n(a);e.a},3601:function(t,n,o){"use strict";(function(t){o("30b7"),o("921b");a(o("66fd"));var n=a(o("df5a"));function a(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,o("6e42")["createPage"])},"385d":function(t,n,o){"use strict";o.r(n);var a=o("17df"),e=o.n(a);for(var i in a)"default"!==i&&function(t){o.d(n,t,function(){return a[t]})}(i);n["default"]=e.a},a255:function(t,n,o){"use strict";var a=function(){var t=this,n=t.$createElement;t._self._c},e=[];o.d(n,"a",function(){return a}),o.d(n,"b",function(){return e})},df5a:function(t,n,o){"use strict";o.r(n);var a=o("a255"),e=o("385d");for(var i in e)"default"!==i&&function(t){o.d(n,t,function(){return e[t]})}(i);o("1d04");var l=o("2877"),r=Object(l["a"])(e["default"],a["a"],a["b"],!1,null,null,null);n["default"]=r.exports}},[["3601","common/runtime","common/vendor"]]]);