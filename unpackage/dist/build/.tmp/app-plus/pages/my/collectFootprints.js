(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/collectFootprints"],{"25ea":function(e,t,a){"use strict";a.r(t);var i=a("927b"),n=a("ddcb");for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);a("2dbf");var l=a("2877"),s=Object(l["a"])(n["default"],i["a"],i["b"],!1,null,null,null);t["default"]=s.exports},"2dbf":function(e,t,a){"use strict";var i=a("dcb7"),n=a.n(i);n.a},"85c2":function(e,t,a){"use strict";(function(e){a("30b7"),a("921b");i(a("66fd"));var t=i(a("25ea"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},"927b":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=(e._self._c,e.__map(e.inRelease.arrs,function(t,a){var i=t.supply.price.toFixed(2);return{$orig:e.__get_orig(t),g0:i}})),i=e.__map(e.Undercarriage.arrs,function(t,a){var i=t.supply.price.toFixed(2);return{$orig:e.__get_orig(t),g1:i}});e._isMounted||(e.e0=function(t){e.tabactive=1},e.e1=function(t){e.tabactive=2}),e.$mp.data=Object.assign({},{$root:{l0:a,l1:i}})},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},a75c:function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("5852")),r=(a("90c6"),l(a("ef4f")));function l(e){return e&&e.__esModule?e:{default:e}}var s={onLoad:function(e){this.tabactive=e.id},onReady:function(){this.loadRelease(),this.loadUndercarriage()},data:function(){return{location:{latitude:"",longitude:""},inRelease:{arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},Undercarriage:{arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},tabactive:1}},methods:{clearZuJi:function(){var t=this;console.log(e(111," at pages/my/collectFootprints.vue:199")),i.showModal({title:"提示",content:"是否清除所有足迹",cancelText:"否",confirmText:"是",success:function(e){e.confirm&&t.$myhttp.post(t.websiteUrl+"/my/supplies/tracks/clear","",function(){t.Undercarriage={arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},t.loadUndercarriage(),i.showToast({title:"清除成功"})})}})},todetails:function(e,t){i.navigateTo({url:"../detailSupply/detailSupply?id="+e+"&info="+JSON.stringify(t)})},times:function(e){var t="",a=new Date(e),i=a.getTime(),r=(new Date).getTime(),l=r-i,s=2592e6,o=864e5,c=36e5,u=6e4;if(l<o){if(l<c){for(var d=1;d<=60;d++)if(l<=d*u){t=d+"分钟前";break}}else for(d=2;d<=24;d++)if(l<d*c){t=d+"小时前";break}}else if(l<s){for(var g=2;g<=30;g++)if(l<g*o){t=g+"天前";break}}else t=(0,n.default)(a);return t},getlocation:function(e,t){if(!this.location.latitude)return"";var a,i,n=e*Math.PI/180,r=t;i=this.location.longitude,a=this.location.latitude*Math.PI/180;var l=n-a,s=r*Math.PI/180-i*Math.PI/180,o=2*Math.asin(Math.sqrt(Math.pow(Math.sin(l/2),2)+Math.cos(n)*Math.cos(a)*Math.pow(Math.sin(s/2),2)));return o*=6378.137,o=parseInt(Math.round(1e4*o)/10),(o/1e3).toFixed(2)+"公里"},loadUndercarriage:function(){var t=this;this.Undercarriage.loading||(this.Undercarriage.loading=!0,0===this.Undercarriage.Total||this.Undercarriage.Total!=this.Undercarriage.arrs.length?(this.Undercarriage.loadingText="上拉加载更多",this.$myhttp.get(this.websiteUrl+"/my/supplies/tracks?start="+this.Undercarriage.start+"&length="+this.Undercarriage.length+"&onsale=false","",function(a){console.log(e(a," at pages/my/collectFootprints.vue:305"));a=a.data.data;if(t.Undercarriage.Total=a.totalCount,a.items.length){var i=a.items;if(i.forEach(function(e){e.supply.details=t.$store.state.categories[e.supply.categoryId],e.supply.loc=t.getlocation(e.supply.location.lat,e.supply.location.lon),e.supply.time=t.times(e.supply.refreshTime);var a=(0,r.default)(e.supply.areaId);e.supply.city=a.replace(/-/g,"");for(var i=JSON.parse(e.supply.specifications),n=i.length,l="",s=0;s<n;s++){var o="",c="";o=i[s].value instanceof Array?i[s].value[0]==i[s].value[1]?i[s].value[0]:i[s].value[0]+o+"-"+i[s].value[1]:i[s].value,i[s].unit&&(c=i[s].unit),l+=i[s].name+": "+o+c+";"}e.supply.specificationsStr=l}),t.Undercarriage.start+=t.Undercarriage.length,t.Undercarriage.arrs=t.Undercarriage.arrs.concat(i),0!==t.Undercarriage.Total&&t.Undercarriage.Total==t.Undercarriage.arrs.length)return void(t.Undercarriage.loadingText="已全部加载完毕")}else t.Undercarriage.loadingText="已全部加载完毕";t.Undercarriage.times++,t.Undercarriage.loading=!1},this)):this.Undercarriage.loadingText="已全部加载完毕")},loadRelease:function(){var t=this;this.inRelease.loading||(this.inRelease.loading=!0,0===this.inRelease.Total||this.inRelease.Total!=this.inRelease.arrs.length?(this.inRelease.loadingText="上拉加载更多",this.$myhttp.get(this.websiteUrl+"/my/supplies/marks?start="+this.inRelease.start+"&length="+this.inRelease.length+"&onsale=true","",function(a){a=a.data.data;if(t.inRelease.Total=a.totalCount,a.items.length){var i=a.items;if(i.forEach(function(e){e.supply.details=t.$store.state.categories[e.supply.categoryId],e.supply.loc=t.getlocation(e.supply.location.lat,e.supply.location.lon),e.supply.time=t.times(e.supply.refreshTime);var a=(0,r.default)(e.supply.areaId);e.supply.city=a.replace(/-/g,"");for(var i=JSON.parse(e.supply.specifications),n=i.length,l="",s=0;s<n;s++){var o="",c="";o=i[s].value instanceof Array?i[s].value[0]==i[s].value[1]?i[s].value[0]:i[s].value[0]+o+"-"+i[s].value[1]:i[s].value,i[s].unit&&(c=i[s].unit),l+=i[s].name+": "+o+c+";"}e.supply.specificationsStr=l}),t.inRelease.start+=t.inRelease.length,t.inRelease.arrs=t.inRelease.arrs.concat(i),console.log(e(t.inRelease.arrs," at pages/my/collectFootprints.vue:404")),0!==t.inRelease.Total&&t.inRelease.Total==t.inRelease.arrs.length)return void(t.inRelease.loadingText="已全部加载完毕");console.log(e(t.inRelease.arrs," at pages/my/collectFootprints.vue:411"))}else t.inRelease.loadingText="已全部加载完毕";t.inRelease.times++,t.inRelease.loading=!1},this)):this.inRelease.loadingText="已全部加载完毕")},swiperchange:function(e){this.tabactive=e.detail.current+1}},onPullDownRefresh:function(){1==this.tabactive?(this.inRelease={arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},this.loadRelease()):(this.Undercarriage={arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},this.loadUndercarriage()),i.stopPullDownRefresh()}};t.default=s}).call(this,a("0de9")["default"],a("6e42")["default"])},dcb7:function(e,t,a){},ddcb:function(e,t,a){"use strict";a.r(t);var i=a("a75c"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);t["default"]=n.a}},[["85c2","common/runtime","common/vendor"]]]);