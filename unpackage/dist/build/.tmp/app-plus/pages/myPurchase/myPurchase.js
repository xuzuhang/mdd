(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myPurchase/myPurchase"],{3476:function(e,a,t){"use strict";var n=t("4df7"),r=t.n(n);r.a},"3caa":function(e,a,t){"use strict";(function(e){t("30b7"),t("921b");n(t("66fd"));var a=n(t("d55e"));function n(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,t("6e42")["createPage"])},"4c86":function(e,a,t){"use strict";t.r(a);var n=t("4ffe"),r=t.n(n);for(var i in n)"default"!==i&&function(e){t.d(a,e,function(){return n[e]})}(i);a["default"]=r.a},"4df7":function(e,a,t){},"4ffe":function(e,a,t){"use strict";(function(e,t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={onLoad:function(e){e.return&&(this.returnIndex=!0),this.loadRelease(),this.loadUndercarriage()},onBackPress:function(){if(this.returnIndex)return e.redirectTo({url:"../tabs/tabs"}),!0},data:function(){return{returnIndex:!1,tabactive:1,inRelease:{arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},Undercarriage:{arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1}}},onPullDownRefresh:function(){1==this.tabactive?(this.inRelease={arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},this.loadRelease()):(this.Undercarriage={arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},this.loadUndercarriage()),e.stopPullDownRefresh()},methods:{tosupply:function(){e.navigateTo({url:"../release/retrieval?type=want"})},tobaojia:function(a){JSON.stringify(a);e.setStorage({key:"baojia",data:JSON.stringify(a),success:function(){e.navigateTo({url:"../wantBuy/shoujia"})}})},toinfos:function(a){3==a.approvalStatus&&e.navigateTo({url:"../purchaseDetails/purchaseDetails?id="+a.id+"&userId="+a.userId})},toedit:function(a){e.setStorage({key:"editorQuotation",data:JSON.stringify(a),success:function(){e.navigateTo({url:"index"})}})},deteleSale:function(a,t,n,r){var i=this;e.showModal({title:"提示",content:"确定要把"+n+"删除么",success:function(n){n.confirm&&i.$myhttp.delete(i.websiteUrl+"/purchases/"+a,{},function(a){i[r].arrs.splice(t,1),i[r].start-=1,i[r].Total-=1,e.showToast({icon:"success",title:"删除成功"})},i)}})},downSale:function(a,t,n){var r=this;e.showModal({title:"提示",content:"确定要结束"+n+"报价么",success:function(n){n.confirm&&r.$myhttp.put(r.websiteUrl+"/purchases/"+a+"/offline","",function(a){r.inRelease.arrs.splice(t,1),r.inRelease.start-=1,r.inRelease.Total-=1,r.Undercarriage={arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},r.loadUndercarriage(),e.showToast({icon:"success",title:"下线成功"})},r)}})},upSale:function(a,t,n){var r=this;e.showModal({title:"提示",content:"确定要把"+n+"上架么",success:function(n){n.confirm&&r.$myhttp.put(r.websiteUrl+"/purchases/"+a+"/online","",function(a){r.Undercarriage.arrs.splice(t,1),r.Undercarriage.start-=1,r.Undercarriage.Total-=1,r.inRelease={arrs:[],Total:0,start:0,length:6,loadingText:"已全部加载完毕",times:0,loading:!1},r.loadRelease(),e.showToast({icon:"success",title:"上架成功"})},r)}})},swiperchange:function(e){this.tabactive=e.detail.current+1},loadUndercarriage:function(){var e=this;this.Undercarriage.loading||(this.Undercarriage.loading=!0,0===this.Undercarriage.Total||this.Undercarriage.Total!=this.Undercarriage.arrs.length?(this.Undercarriage.loadingText="上拉加载更多",this.$myhttp.get(this.websiteUrl+"/purchases?start="+this.Undercarriage.start+"&length="+this.Undercarriage.length+"&online=false","",function(a){console.log(t(a," at pages/myPurchase/myPurchase.vue:356"));a=a.data.data;if(e.Undercarriage.Total=a.totalCount,a.items.length){var n=a.items;if(console.log(t(n," at pages/myPurchase/myPurchase.vue:361")),n.forEach(function(a){a.details=e.$store.state.categories[a.categoryId],a.specificationsArr=[];for(var t=JSON.parse(a.specifications),n=t.length>=4?4:t.length,r=0;r<n;r++){var i="",s="",o="";s=t[r].value instanceof Array?t[r].value[0]:t[r].value,t[r].unit&&(o=t[r].unit),i=t[r].name+": "+s+o,a.specificationsArr.push(i)}}),e.Undercarriage.start+=e.Undercarriage.length,e.Undercarriage.arrs=e.Undercarriage.arrs.concat(n),0!==e.Undercarriage.Total&&e.Undercarriage.Total==e.Undercarriage.arrs.length)return void(e.Undercarriage.loadingText="已全部加载完毕");console.log(t(e.Undercarriage.arrs," at pages/myPurchase/myPurchase.vue:392"))}else e.Undercarriage.loadingText="已全部加载完毕";e.Undercarriage.times++,e.Undercarriage.loading=!1},this)):this.Undercarriage.loadingText="已全部加载完毕")},loadRelease:function(){var e=this;this.inRelease.loading||(this.inRelease.loading=!0,0===this.inRelease.Total||this.inRelease.Total!=this.inRelease.arrs.length?(this.inRelease.loadingText="上拉加载更多",this.$myhttp.get(this.websiteUrl+"/purchases?start="+this.inRelease.start+"&length="+this.inRelease.length+"&online=true","",function(a){a=a.data.data;if(e.inRelease.Total=a.totalCount,a.items.length){var n=a.items;if(n.forEach(function(a){a.details=e.$store.state.categories[a.categoryId],a.specificationsArr=[];for(var t=JSON.parse(a.specifications),n=t.length>=4?4:t.length,r=0;r<n;r++){var i="",s="",o="";s=t[r].value instanceof Array?t[r].value[0]:t[r].value,t[r].unit&&(o=t[r].unit),i=t[r].name+": "+s+o,a.specificationsArr.push(i)}}),e.inRelease.start+=e.inRelease.length,e.inRelease.arrs=e.inRelease.arrs.concat(n),console.log(t(e.inRelease.arrs," at pages/myPurchase/myPurchase.vue:442")),0!==e.inRelease.Total&&e.inRelease.Total==e.inRelease.arrs.length)return void(e.inRelease.loadingText="已全部加载完毕");console.log(t(e.inRelease.arrs," at pages/myPurchase/myPurchase.vue:449"))}else e.inRelease.loadingText="已全部加载完毕";e.inRelease.times++,e.inRelease.loading=!1},this)):this.inRelease.loadingText="已全部加载完毕")}}};a.default=n}).call(this,t("6e42")["default"],t("0de9")["default"])},ac68:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement;e._self._c;e._isMounted||(e.e0=function(a){e.tabactive=1},e.e1=function(a){e.tabactive=2})},r=[];t.d(a,"a",function(){return n}),t.d(a,"b",function(){return r})},d55e:function(e,a,t){"use strict";t.r(a);var n=t("ac68"),r=t("4c86");for(var i in r)"default"!==i&&function(e){t.d(a,e,function(){return r[e]})}(i);t("3476");var s=t("2877"),o=Object(s["a"])(r["default"],n["a"],n["b"],!1,null,null,null);a["default"]=o.exports}},[["3caa","common/runtime","common/vendor"]]]);